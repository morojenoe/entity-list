<div fxLayout="column" fxLayoutAlign="start">
  <div fxLayout="row" fxLayoutAlign="end">
    <button disableRipple="true" mat-icon-button [mat-dialog-close]="undefined">
        <div class="close-icon-container">
          <mat-icon class="close-icon">close</mat-icon>
        </div>
      </button>
  </div>
  <h4 fxFlexAlign="center" class="mat-subheading-2 caption-color">
    2016 KPI:$15M Renewal Revenue (Strategic Goal)
  </h4>
  <div fxFlexOffset="40px" fxLayoutAlign="center" class="mat-display-1">Add entities</div>
  <div fxLayoutAlign="center" fxLayout="row">
    <div class="mat-elevation-z2" fxFlex.xs="100%" fxFlex.sm="600px" fxFlex.gt-sm="780px" >
      <div class="search-field">
        <mat-form-field
          appearance="standard"
          floatLabel="never"
          fxFlexFill
        >
          <mat-icon class="search-field__prefix" matPrefix>search</mat-icon>
          <input
            cdkFocusInitial
            #searchBox
            id="search-box"
            (keyup)="search(searchBox.value)"
            matInput
            placeholder="Search entity"
          >
          <mat-icon class="search-field__suffix" matSuffix>filter_list</mat-icon>
        </mat-form-field>
      </div>
      <mat-selection-list (selectionChange)="changeSelection($event)">
        <ng-container *ngFor="let entity of entities$ | async; let i = index">
          <mat-divider *ngIf="i > 0"></mat-divider>
          <div class="list-item-container">
            <mat-list-option
              [value]="entity"
              [selected]="isSelected(entity.id)"
              checkboxPosition="before"
            >
              <app-entity [entity]="entity"></app-entity>
            </mat-list-option>
          </div>
        </ng-container>
      </mat-selection-list>
    </div>
  </div>
  <mat-dialog-actions fxFlexAlign="center" fxFlexOffset="93px">
    <div class="connect-button-container">
      <button
        class="connect-button"
        mat-raised-button
        color="primary"
        [mat-dialog-close]="entities"
      >
        CONNECT
      </button>
    </div>
  </mat-dialog-actions>
</div>
